<!-- MOMENT -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js'></script>

<div id="number-container"></div>

<style>
  @font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/OpenSans.eot');
    src: url('/fonts/OpenSans.eot');
    src: url('/fonts/OpenSans.eot?#iefix') format('embedded-opentype'),
     url('/fonts/OpenSans.woff') format('woff'),
     url('/fonts/OpenSans.ttf') format('truetype'),
     url('/fonts/OpenSans.svg#open_sansregular') format('svg');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
  }
</style>

<template id="number-template">
  <style>
    @import '//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css';
    @import '/css/number.css';

    div {
      font-family: 'Open Sans';
    }

    #number h1 {
      font-size: <%= @font_size %>;
    }
    #number h2 {
      font-size: 30vw;
    }
  </style>
  <div id='widget'>
    <div id='number'></div>
  </div>
</template>

<script src='/javascripts/webcomponents.js'></script>
<script src="/javascripts/countup.js"></script>
<script src="/javascripts/number.js"></script>

<script>
var container = document.querySelector('#number-container');
var root = container.createShadowRoot();
$.getJSON(document.URL, function (json) {
  t = document.querySelector('#number-template')
  root.innerHTML = t.innerHTML
  title = '<%= @title["en"] %>'
  number(json, title, $(container.shadowRoot), '<%= @datatype %>')
})
</script>
